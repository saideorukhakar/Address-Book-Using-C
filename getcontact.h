#include<stdio.h>
#include "contact.h"
#include<string.h>

//get contact

void getcontact(AddressBook *addressBook)
{

    //GET CONTACT FOR SEARCHING CONTACTS
    int choise,flag = 0,count = 1;
    char name[50],phone[20],email[50];

    printf("---------------------------------\n");
    printf("|\tSearch Contact\t\t|\n");
    printf("---------------------------------\n");
    printf("| 1. Search by name.            |\n");
    printf("| 2. Search by phonenumber      |\n");
    printf("| 3. Search by email            |\n");
    printf("---------------------------------\n");
    printf("\n");
    printf("-----------------------------------------------------------------------------------------------------------------\n");
    printf("| Enter the choise : ");
    scanf("%d",&choise);
    printf("-----------------------------------------------------------------------------------------------------------------\n");
    printf("\n");
    getchar();
    
    switch(choise)
    {
        case 1 : 
                printf("-----------------------------------------------------------------------------------------------------------------\n");
                printf("| Enter the name : ");
                scanf("%[^\n]",name);
                printf("-----------------------------------------------------------------------------------------------------------------\n");
                printf("\n");

                printf("-----------------------------------------------------------------------------------------------------------------\n");
                printf("|\t\t\t\t\t\tAddress Book\t\t\t\t\t\t\t|\n");
                printf("-----------------------------------------------------------------------------------------------------------------\n");

                printf("-----------------------------------------------------------------------------------------------------------------\n");
                printf("| Sr.No.|\t\tName\t\t|\tPhone Number\t|\t\tEmail ID\t\t\t|\n");
                printf("-----------------------------------------------------------------------------------------------------------------\n");

                for(int i = 0; i < addressBook->contactCount; i++)
                {
                    if((strcmp(name,addressBook->contacts[i].name)) == 0)
                    {
                        
                        printf("|  %d\t|\t%s \t|\t%s\t|\t%s \t\t|\n",count,addressBook ->contacts[i].name, addressBook -> contacts[i].phone, addressBook -> contacts[i].email);
                        
                        flag = 1;
                        
                    }
                    count++;
                }

                if(flag == 0)
                {
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("Name is not found...\n");
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("\n");
                }
                else
                {
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("\n");
                }
                            
        break;
        case 2 : 
                printf("-----------------------------------------------------------------------------------------------------------------\n");
                printf("| Enter the phone number : ");
                scanf("%[^\n]",phone);
                printf("-----------------------------------------------------------------------------------------------------------------\n");
                printf("\n");

                for(int i = 0; i < addressBook->contactCount; i++)
                {
                    if((strcmp(phone,addressBook->contacts[i].phone)) == 0)
                    {
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("|\t\t\t\t\t\tAddress Book\t\t\t\t\t\t\t|\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");

                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("| Sr.No.|\t\tName\t\t|\tPhone Number\t|\t\tEmail ID\t\t\t|\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("|  %d\t|\t%s \t|\t%s\t|\t%s \t\t|\n",count,addressBook ->contacts[i].name, addressBook -> contacts[i].phone, addressBook -> contacts[i].email);
                        count++;
                        flag = 1;
                        break;
                    }
                    count++;
                }

                if(flag == 0)
                {
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("Phone number is not found...\n");
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("\n");
                }
                else
                {
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("\n");
                }
        break;
        case 3 : 
                printf("-----------------------------------------------------------------------------------------------------------------\n");
                printf("| Enter the email id : ");
                scanf("%[^\n]",email);
                printf("-----------------------------------------------------------------------------------------------------------------\n");
                printf("\n");

                for(int i = 0; i < addressBook->contactCount; i++)
                {
                    if((strcmp(email,addressBook->contacts[i].email)) == 0)
                    {
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("|\t\t\t\t\t\tAddress Book\t\t\t\t\t\t\t|\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");

                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("| Sr.No.|\t\tName\t\t|\tPhone Number\t|\t\tEmail ID\t\t\t|\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("|  %d\t|\t%s \t|\t%s\t|\t%s \t\t|\n",count,addressBook ->contacts[i].name, addressBook -> contacts[i].phone, addressBook -> contacts[i].email);
                        count++;
                        flag = 1;
                        break;
                    }
                    count++;
                }

                if(flag == 0)
                {
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("Email is not found...\n");
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("\n");
                }
                else
                {
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("\n");
                }
        break;
    }
}



//get contact location

int getcontactlocation(AddressBook *addressBook)
{
    //GET CONTACT LOCATION FOR EDIT AND DELETEING CONTACTS
    
    int option,index,flag = 0,count = 0,count1 = 1;
    char name[20],phone[20],email[50];

    printf("---------------------------------\n");
    printf("|\tSearch Contact\t\t|\n");
    printf("---------------------------------\n");
    printf("| 1. Search by name.            |\n");
    printf("| 2. Search by phonenumber      |\n");
    printf("| 3. Search by email            |\n");
    printf("---------------------------------\n");
    printf("\n");
    printf("-----------------------------------------------------------------------------------------------------------------\n");
    printf("| Enter the option : ");
    
    scanf("%d",&option);
    printf("-----------------------------------------------------------------------------------------------------------------\n");
    printf("\n");

    switch(option)
    {
        case 1 :
                do
                {
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("| Enter the name : ");
                    
                    getchar();
                    scanf("%[^\n]",name);
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("\n");

                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("|\t\t\t\t\t\tAddress Book\t\t\t\t\t\t\t|\n");
                    printf("-----------------------------------------------------------------------------------------------------------------\n");

                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("| Sr.No.|\t\tName\t\t|\tPhone Number\t|\t\tEmail ID\t\t\t|\n");
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    for(int i = 0; i < addressBook->contactCount; i++)
                    {
                        if((strcmp(name,addressBook->contacts[i].name)) == 0)
                        {
                            
                            printf("|  %d\t|\t%s \t|\t%s\t|\t%s \t\t|\n",count1,addressBook ->contacts[i].name, addressBook -> contacts[i].phone, addressBook -> contacts[i].email);
                            count++;
                            index = i;
                            flag = 1;
                        }
                        count1++;
                        
                    }
                    if(count > 1)
                    {
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("Enter the Sr.No. : ");
                        scanf("%d",&index);
                        index-=1;
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("\n");
    
                    }
                    else
                    {
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("\n");
                    }
                    if(flag == 0)
                    {
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("This name is not present in contact book, please enetr correct name.\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("\n");
                    }
                    


                } while (flag == 0);
            break;

        case 2 :
                do
                {
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("| Enter the phone number : ");
                    getchar();
                    scanf("%s",phone);
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("\n");

                    for(int i = 0; i < addressBook->contactCount; i++)
                    {
                        if((strcmp(phone,addressBook->contacts[i].phone)) == 0)
                        {
                            index = i;
                            flag = 1;
                            break;
                        }
                        count1++;
                    }

                    if(flag == 0)
                    {
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("This phone number is not present in contact book, please enetr correct phone number.\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("\n");
                    }
                    else
                    {
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("|\t\t\t\t\t\tAddress Book\t\t\t\t\t\t\t|\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");

                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("| Sr.No.|\t\tName\t\t|\tPhone Number\t|\t\tEmail ID\t\t\t|\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("|  %d\t|\t%s \t|\t%s\t|\t%s \t\t|\n",count1,addressBook ->contacts[index].name, addressBook -> contacts[index].phone, addressBook -> contacts[index].email);
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("\n");
                    }

                } while (flag == 0);
            break;

        case 3 :
                do
                {
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("| Enter the email id : ");
                    getchar();
                    scanf("%s",email);
                    printf("-----------------------------------------------------------------------------------------------------------------\n");
                    printf("\n");

                    for(int i = 0; i < addressBook->contactCount; i++)
                    {
                        if((strcmp(email,addressBook->contacts[i].email)) == 0)
                        {
                            index = i;
                            flag = 1;
                            break;
                        }
                        count1++;
                    }

                    if(flag == 0)
                    {
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("This email id is not present in contact book, please enetr correct email id.\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("\n");
                    }
                    else
                    {
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("|\t\t\t\t\t\tAddress Book\t\t\t\t\t\t\t|\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");

                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("| Sr.No.|\t\tName\t\t|\tPhone Number\t|\t\tEmail ID\t\t\t|\n");
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("|  %d\t|\t%s \t|\t%s\t|\t%s \t\t|\n",count1,addressBook ->contacts[index].name, addressBook -> contacts[index].phone, addressBook -> contacts[index].email);
                        printf("-----------------------------------------------------------------------------------------------------------------\n");
                        printf("\n");
                    }

                } while (flag == 0);
            break;
                
    }

    return index;
}